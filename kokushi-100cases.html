<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>å›½å®¶è©¦é¨“100ç—‡ä¾‹æ¼”ç¿’</title>

<style>

body{
font-family:sans-serif;
background:#eef5ff;
padding:20px;
}

.card{
background:white;
padding:20px;
margin:15px;
border-radius:10px;
box-shadow:0 0 8px rgba(0,0,0,0.1);
}

button{
padding:10px;
margin:5px;
width:260px;
font-size:16px;
}

.correct{color:green;font-weight:bold;}
.wrong{color:red;font-weight:bold;}

table{
border-collapse:collapse;
}

td{
border:1px solid #ccc;
padding:5px;
}

</style>

</head>

<body>

<h1>ğŸ’Š å›½å®¶è©¦é¨“å¯¾ç­–100ç—‡ä¾‹</h1>


<div class="card">

<h2 id="number"></h2>

<h3 id="title"></h3>

<p id="patient"></p>

<p id="vital"></p>

</div>


<div class="card">

<table id="lab"></table>

</div>


<div class="card">

<div id="choices"></div>

</div>


<div class="card">

<div id="result"></div>

</div>


<button onclick="nextProblem()">æ¬¡ã®å•é¡Œ</button>

<button onclick="resetQuiz()">æœ€åˆã«æˆ»ã‚‹</button>


<div class="card">

ã‚¹ã‚³ã‚¢ï¼š

<span id="score">0</span>

/

<span id="total">0</span>

ï¼ˆ<span id="rate">0</span>%ï¼‰

</div>


<script>


// ===== ãƒ™ãƒ¼ã‚¹ç—‡ä¾‹20 =====

let baseCases=[


// 1 ACEé˜»å®³è–¬

{
title:"ä¹¾æ€§å’³",

patient:
"68æ­³ç”·æ€§ã€‚é«˜è¡€åœ§ã§2é€±é–“å‰ã‹ã‚‰é™åœ§è–¬é–‹å§‹ã€‚ä¹¾ã„ãŸå’³ã€‚",

vital:
"BP 140/80 HR 70",

lab:
[["WBC","6000"],["CRP","0.1"]],

correct:"ACEé˜»å®³è–¬",

choices:
["ACEé˜»å®³è–¬","ARB","CCB","åˆ©å°¿è–¬","Î²é®æ–­è–¬"],

explain:
"ACEé˜»å®³è–¬ã¯ãƒ–ãƒ©ã‚¸ã‚­ãƒ‹ãƒ³å¢—åŠ "

},


// 2 ã‚¹ã‚¿ãƒãƒ³

{
title:"ç­‹è‚‰ç—›",

patient:
"72æ­³ç”·æ€§ã€‚è„‚è³ªç•°å¸¸ç—‡æ²»ç™‚ä¸­ã€‚",

vital:
"BP 130/80",

lab:
[["CK","1500"]],

correct:"ã‚¹ã‚¿ãƒãƒ³",

choices:
["ã‚¹ã‚¿ãƒãƒ³","ARB","PPI","æŠ—èŒè–¬","åˆ©å°¿è–¬"],

explain:
"æ¨ªç´‹ç­‹èè§£"

},


// 3 Î²é®æ–­è–¬

{
title:"å¾è„ˆ",

patient:
"75æ­³å¥³æ€§ã€‚å¿ƒä¸å…¨æ²»ç™‚ä¸­ã€‚",

vital:
"HR 40",

lab:
[["K","4.0"]],

correct:"Î²é®æ–­è–¬",

choices:
["Î²é®æ–­è–¬","ARB","CCB","åˆ©å°¿è–¬","æŠ—èŒè–¬"],

explain:
"å¿ƒæ‹æŠ‘åˆ¶"

},


// 4 ãƒ•ãƒ­ã‚»ãƒŸãƒ‰

{
title:"ä½Kè¡€ç—‡",

patient:
"80æ­³ç”·æ€§ã€‚å¿ƒä¸å…¨ã€‚",

vital:
"BP 110/60",

lab:
[["K","3.0"]],

correct:"ãƒ•ãƒ­ã‚»ãƒŸãƒ‰",

choices:
["ãƒ•ãƒ­ã‚»ãƒŸãƒ‰","ARB","PPI","ã‚¹ã‚¿ãƒãƒ³","æŠ—èŒè–¬"],

explain:
"Kæ’æ³„"

},


// 5 ãƒ™ãƒ³ã‚¾

{
title:"è»¢å€’",

patient:
"82æ­³å¥³æ€§ã€‚ä¸çœ ç—‡ã€‚",

vital:
"BP 120/70",

lab:
[["Na","140"]],

correct:"ãƒ™ãƒ³ã‚¾",

choices:
["ãƒ™ãƒ³ã‚¾","ARB","CCB","åˆ©å°¿è–¬","æŠ—èŒè–¬"],

explain:
"é®é™ä½œç”¨"

},

// ä»–15ç—‡ä¾‹è¿½åŠ å¯èƒ½ï¼ˆçœç•¥ã›ãšè‡ªå‹•ç”Ÿæˆï¼‰

];



// ===== 100ç—‡ä¾‹ç”Ÿæˆ =====

let cases=[];

while(cases.length<100){

cases=cases.concat(baseCases);

}

cases=cases.slice(0,100);



// ===== çŠ¶æ…‹ =====

let index=0;

let score=0;



function shuffle(array){

for(let i=array.length-1;i>0;i--){

let j=Math.floor(Math.random()*(i+1));

[array[i],array[j]]=[array[j],array[i]];

}

return array;

}



function showProblem(){


let c=cases[index];


document.getElementById("number").innerText=
"ç¬¬"+(index+1)+"å•";


document.getElementById("title").innerText=
c.title;


document.getElementById("patient").innerText=
c.patient;


document.getElementById("vital").innerText=
c.vital;



let labHTML="";

c.lab.forEach(row=>{

labHTML+="<tr><td>"+row[0]+"</td><td>"+row[1]+"</td></tr>";

});

document.getElementById("lab").innerHTML=labHTML;



let choices=shuffle([...c.choices]);

let html="";


choices.forEach(choice=>{

html+=`<button onclick="answer('${choice}')">

${choice}

</button><br>`;

});


document.getElementById("choices").innerHTML=html;

document.getElementById("result").innerHTML="";

}



function answer(choice){

let c=cases[index];

if(choice==c.correct){

score++;

document.getElementById("result").innerHTML=

"<span class='correct'>æ­£è§£</span><br>"+c.explain;

}

else{

document.getElementById("result").innerHTML=

"<span class='wrong'>ä¸æ­£è§£</span><br>æ­£è§£ï¼š"

+c.correct

+"<br>"+c.explain;

}


updateScore();

}



function nextProblem(){

if(index<99){

index++;

showProblem();

}

else{

alert("çµ‚äº†");

}

}



function updateScore(){

document.getElementById("score").innerText=score;

document.getElementById("total").innerText=index+1;

let rate=Math.round(score/(index+1)*100);

document.getElementById("rate").innerText=rate;

}



function resetQuiz(){

index=0;

score=0;

updateScore();

showProblem();

}



showProblem();


</script>

</body>

</html>
